"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[9709],{9709:(e,t,a)=>{a.d(t,{ChatKitProvider:()=>d});var s=a(6540),i=a(4848);const n=(0,s.createContext)(null),l=({children:e})=>{const[t,a]=(0,s.useState)(!1),[l,o]=(0,s.useState)(!1),c={isOpen:t,openChat:()=>a(!0),closeChat:()=>a(!1),toggleChat:()=>a(!t),isMobile:l,setIsMobile:o};return(0,i.jsx)(n.Provider,{value:c,children:e})},o=(0,s.createContext)(null),c=({children:e})=>{const[t,a]=(0,s.useState)([]),[n,l]=(0,s.useState)(!1),[c,r]=(0,s.useState)(null),[d,u]=(0,s.useState)(()=>"undefined"!=typeof window&&localStorage.getItem("chatkit-session-id")||`session-${Date.now()}`),h=(0,s.useCallback)(e=>{a(t=>[...t,e])},[]),g=(0,s.useCallback)((e,t)=>{a(a=>a.map(a=>a.id===e?{...a,...t}:a))},[]),S=(0,s.useCallback)(()=>{a([])},[]),b=(0,s.useCallback)(e=>{l(e)},[]),m={messages:t,addMessage:h,updateMessage:g,clearMessages:S,isStreaming:n,setIsStreaming:(0,s.useCallback)(e=>{l(e)},[]),setStreamingState:b,selectedText:c,setSelectedText:r,sessionId:d};return(0,i.jsx)(o.Provider,{value:m,children:e})},r=(0,s.createContext)(null),d=({children:e})=>{const[t,n]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),[g,S]=(0,s.useState)([]),[b,m]=(0,s.useState)(!1),[w,f]=(0,s.useState)(null),[k,C]=(0,s.useState)(()=>"undefined"!=typeof window&&localStorage.getItem("chatkit-session-id")||`session-${Date.now()}`);(0,s.useEffect)(()=>{(async()=>{try{const e=await fetch("/api/config/chatkit");if(!e.ok)throw new Error(`Failed to load config: ${e.status}`);const t=await e.json();n(t)}catch(e){console.error("Error loading ChatKit config:",e),h(e.message),n({theme:"light",maxTokens:1e3,temperature:.7})}finally{d(!1)}})(),"undefined"!=typeof window&&localStorage.setItem("chatkit-session-id",k)},[k]),(0,s.useEffect)(()=>{(async()=>{if("undefined"!=typeof window)try{await Promise.all([a.e(1869),a.e(6669)]).then(a.bind(a,5079)),await Promise.all([a.e(1869),a.e(9333)]).then(a.bind(a,4095)),await Promise.all([a.e(1869),a.e(3454)]).then(a.bind(a,8216)),await Promise.all([a.e(1869),a.e(4193)]).then(a.bind(a,8955))}catch(e){console.warn("Failed to load ChatKit styles:",e)}})()},[]);const p={config:t,isLoading:o,error:u,messages:g,addMessage:(0,s.useCallback)(e=>{S(t=>[...t,e])},[]),updateMessage:(0,s.useCallback)((e,t)=>{S(a=>a.map(a=>a.id===e?{...a,...t}:a))},[]),clearMessages:(0,s.useCallback)(()=>{S([])},[]),isStreaming:b,setIsStreaming:m,selectedText:w,setSelectedText:f,sessionId:k};return(0,i.jsx)(r.Provider,{value:p,children:(0,i.jsx)(l,{children:(0,i.jsx)(c,{children:e})})})}}}]);