"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[9709],{9709:(e,t,s)=>{s.r(t),s.d(t,{ChatKitProvider:()=>u,default:()=>h,useChatKit:()=>d});var a=s(6540),i=s(4848);const o=(0,a.createContext)(null),n=({children:e})=>{const[t,s]=(0,a.useState)(!1),[n,l]=(0,a.useState)(!1),r={isOpen:t,openChat:()=>s(!0),closeChat:()=>s(!1),toggleChat:()=>s(!t),isMobile:n,setIsMobile:l};return(0,i.jsx)(o.Provider,{value:r,children:e})},l=(0,a.createContext)(null),r=({children:e})=>{const[t,s]=(0,a.useState)([]),[o,n]=(0,a.useState)(!1),[r,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(()=>"undefined"!=typeof window&&localStorage.getItem("chatkit-session-id")||`session-${Date.now()}`),h=(0,a.useCallback)(e=>{s(t=>[...t,e])},[]),g=(0,a.useCallback)((e,t)=>{s(s=>s.map(s=>s.id===e?{...s,...t}:s))},[]),S=(0,a.useCallback)(()=>{s([])},[]),C=(0,a.useCallback)(e=>{n(e)},[]),k={messages:t,addMessage:h,updateMessage:g,clearMessages:S,isStreaming:o,setIsStreaming:(0,a.useCallback)(e=>{n(e)},[]),setStreamingState:C,selectedText:r,setSelectedText:c,sessionId:u};return(0,i.jsx)(l.Provider,{value:k,children:e})},c=(0,a.createContext)(null),u=({children:e})=>{const[t,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0),[u,d]=(0,a.useState)(null),[h,g]=(0,a.useState)([]),[S,C]=(0,a.useState)(!1),[k,b]=(0,a.useState)(null),[m,f]=(0,a.useState)(()=>"undefined"!=typeof window&&localStorage.getItem("chatkit-session-id")||`session-${Date.now()}`);(0,a.useEffect)(()=>{(async()=>{try{const e=await fetch("/api/config/chatkit");if(!e.ok)throw new Error(`Failed to load config: ${e.status}`);const t=await e.json();s(t)}catch(e){console.error("Error loading ChatKit config:",e),d(e.message),s({theme:"light",maxTokens:1e3,temperature:.7})}finally{l(!1)}})(),"undefined"!=typeof window&&localStorage.setItem("chatkit-session-id",m)},[m]);const w={config:t,isLoading:o,error:u,messages:h,addMessage:(0,a.useCallback)(e=>{g(t=>[...t,e])},[]),updateMessage:(0,a.useCallback)((e,t)=>{g(s=>s.map(s=>s.id===e?{...s,...t}:s))},[]),clearMessages:(0,a.useCallback)(()=>{g([])},[]),isStreaming:S,setIsStreaming:C,selectedText:k,setSelectedText:b,sessionId:m};return(0,i.jsx)(c.Provider,{value:w,children:(0,i.jsx)(n,{children:(0,i.jsx)(r,{children:e})})})},d=()=>{const e=(0,a.useContext)(c);if(!e)throw new Error("useChatKit must be used within a ChatKitProvider");return e},h=u}}]);