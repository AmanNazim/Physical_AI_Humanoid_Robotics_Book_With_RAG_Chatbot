"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[3158],{8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},8899:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1/ros2-architecture-and-communication/lesson-1.3-basic-publisher-subscriber-implementation","title":"Lesson 1.3 - Basic Publisher/Subscriber Implementation","description":"Learning Objectives","source":"@site/docs/module-1/1-ros2-architecture-and-communication/lesson-1.3-basic-publisher-subscriber-implementation.md","sourceDirName":"module-1/1-ros2-architecture-and-communication","slug":"/module-1/ros2-architecture-and-communication/lesson-1.3-basic-publisher-subscriber-implementation","permalink":"/Physical_AI_Humanoid_Robotics_Book_With_RAG_Chatbot/docs/module-1/ros2-architecture-and-communication/lesson-1.3-basic-publisher-subscriber-implementation","draft":false,"unlisted":false,"editUrl":"https://github.com/AmanNazim/Physical_AI_Humanoid_Robotics_Book_With_RAG_Chatbot/edit/main/physical-ai-humanoid-robotics-book/docs/module-1/1-ros2-architecture-and-communication/lesson-1.3-basic-publisher-subscriber-implementation.md","tags":[],"version":"current","frontMatter":{"title":"Lesson 1.3 - Basic Publisher/Subscriber Implementation"},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 1.2 - Environment Setup and Workspace Creation","permalink":"/Physical_AI_Humanoid_Robotics_Book_With_RAG_Chatbot/docs/module-1/ros2-architecture-and-communication/lesson-1.2-environment-setup-and-workspace-creation"},"next":{"title":"Lesson 1.4 - ROS2 Command Line Tools","permalink":"/Physical_AI_Humanoid_Robotics_Book_With_RAG_Chatbot/docs/module-1/ros2-architecture-and-communication/lesson-1.4-ros2-command-line-tools"}}');var r=s(4848),t=s(8453);const l={title:"Lesson 1.3 - Basic Publisher/Subscriber Implementation"},o="Lesson 1.3 \u2013 Basic Publisher/Subscriber Implementation",a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Concept Overview and Scope",id:"concept-overview-and-scope",level:2},{value:"Understanding Publisher-Subscriber Communication Pattern",id:"understanding-publisher-subscriber-communication-pattern",level:2},{value:"Creating the Publisher Node",id:"creating-the-publisher-node",level:2},{value:"Step 1: Setting Up the Package Structure",id:"step-1-setting-up-the-package-structure",level:3},{value:"Step 2: Creating the Publisher Node",id:"step-2-creating-the-publisher-node",level:3},{value:"Step 3: Understanding the Publisher Code",id:"step-3-understanding-the-publisher-code",level:3},{value:"Creating the Subscriber Node",id:"creating-the-subscriber-node",level:2},{value:"Step 4: Creating the Subscriber Node",id:"step-4-creating-the-subscriber-node",level:3},{value:"Step 5: Understanding the Subscriber Code",id:"step-5-understanding-the-subscriber-code",level:3},{value:"Configuring the Package",id:"configuring-the-package",level:2},{value:"Step 6: Setting Up the Entry Points",id:"step-6-setting-up-the-entry-points",level:3},{value:"Building and Running the Nodes",id:"building-and-running-the-nodes",level:2},{value:"Step 7: Building the Package",id:"step-7-building-the-package",level:3},{value:"Step 8: Sourcing the Workspace",id:"step-8-sourcing-the-workspace",level:3},{value:"Step 9: Running the Publisher Node",id:"step-9-running-the-publisher-node",level:3},{value:"Step 10: Running the Subscriber Node",id:"step-10-running-the-subscriber-node",level:3},{value:"Understanding Message Flow and Asynchronous Communication",id:"understanding-message-flow-and-asynchronous-communication",level:2},{value:"The Asynchronous Nature of Topics",id:"the-asynchronous-nature-of-topics",level:3},{value:"Quality of Service (QoS) Considerations",id:"quality-of-service-qos-considerations",level:3},{value:"Advanced Publisher-Subscriber Concepts",id:"advanced-publisher-subscriber-concepts",level:2},{value:"Multiple Subscribers",id:"multiple-subscribers",level:3},{value:"Topic Discovery",id:"topic-discovery",level:3},{value:"Physical AI Context and Application",id:"physical-ai-context-and-application",level:2},{value:"Error Handling and Best Practices",id:"error-handling-and-best-practices",level:2},{value:"Node Lifecycle Management",id:"node-lifecycle-management",level:3},{value:"Message Validation",id:"message-validation",level:3},{value:"Verification and Testing",id:"verification-and-testing",level:2},{value:"Step 11: Testing Communication Reliability",id:"step-11-testing-communication-reliability",level:3},{value:"Step 12: Using ROS2 Tools for Verification",id:"step-12-using-ros2-tools-for-verification",level:3},{value:"Lesson Summary",id:"lesson-summary",level:2},{value:"Tools / References",id:"tools--references",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lesson-13--basic-publishersubscriber-implementation",children:"Lesson 1.3 \u2013 Basic Publisher/Subscriber Implementation"})}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Write and execute a basic publisher node in Python"}),"\n",(0,r.jsx)(n.li,{children:"Write and execute a basic subscriber node in Python"}),"\n",(0,r.jsx)(n.li,{children:"Launch and test a ROS2 communication graph"}),"\n",(0,r.jsx)(n.li,{children:"Understand the message flow between publisher and subscriber nodes"}),"\n",(0,r.jsx)(n.li,{children:"Use ROS2 tools to verify communication between nodes"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"concept-overview-and-scope",children:"Concept Overview and Scope"}),"\n",(0,r.jsx)(n.p,{children:"This practical lesson teaches you to implement the most fundamental ROS2 communication pattern: publisher-subscriber. You'll write your first ROS2 nodes in Python, creating a publisher that sends messages and a subscriber that receives them. The lesson emphasizes understanding message flow and the asynchronous nature of topic-based communication."}),"\n",(0,r.jsx)(n.p,{children:"The publisher-subscriber pattern is fundamental to Physical AI systems, enabling distributed, modular robot architectures where sensor nodes, processing nodes, and control nodes can communicate seamlessly."}),"\n",(0,r.jsx)(n.h2,{id:"understanding-publisher-subscriber-communication-pattern",children:"Understanding Publisher-Subscriber Communication Pattern"}),"\n",(0,r.jsx)(n.p,{children:"The publisher-subscriber pattern is the backbone of ROS2 communication. This pattern enables asynchronous, decoupled communication between nodes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publisher"}),": A node that sends messages to a specific topic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subscriber"}),": A node that receives messages from a specific topic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topic"}),": A named channel over which messages are sent"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Message"}),": The data structure that carries information between nodes"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This creates a decoupled system where publishers don't need to know about subscribers and vice versa. This decoupling is what allows for flexible, modular robot architectures."}),"\n",(0,r.jsx)(n.h2,{id:"creating-the-publisher-node",children:"Creating the Publisher Node"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-setting-up-the-package-structure",children:"Step 1: Setting Up the Package Structure"}),"\n",(0,r.jsx)(n.p,{children:"First, navigate to your workspace and create a new package for our publisher/subscriber example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python publisher_subscriber_example\ncd publisher_subscriber_example\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-creating-the-publisher-node",children:"Step 2: Creating the Publisher Node"}),"\n",(0,r.jsx)(n.p,{children:"Create the publisher node file in the package directory:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p publisher_subscriber_example\ntouch publisher_subscriber_example/publisher_node.py\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now edit the publisher node file with the following content:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n# publisher_subscriber_example/publisher_node.py\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_publisher = MinimalPublisher()\n\n    rclpy.spin(minimal_publisher)\n\n    # Destroy the node explicitly\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-understanding-the-publisher-code",children:"Step 3: Understanding the Publisher Code"}),"\n",(0,r.jsx)(n.p,{children:"Let's break down the key components of the publisher node:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node Initialization"}),": ",(0,r.jsx)(n.code,{children:"super().__init__('minimal_publisher')"})," creates a ROS2 node named 'minimal_publisher'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publisher Creation"}),": ",(0,r.jsx)(n.code,{children:"self.create_publisher(String, 'topic', 10)"})," creates a publisher that sends String messages on the 'topic' with a queue size of 10"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timer Callback"}),": Creates a timer that calls the callback function every 0.5 seconds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Message Creation"}),": Creates a String message with the current count"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Message Publishing"}),": Publishes the message to the topic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Logging"}),": Logs the published message to the console"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-the-subscriber-node",children:"Creating the Subscriber Node"}),"\n",(0,r.jsx)(n.h3,{id:"step-4-creating-the-subscriber-node",children:"Step 4: Creating the Subscriber Node"}),"\n",(0,r.jsx)(n.p,{children:"Create the subscriber node file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"touch publisher_subscriber_example/subscriber_node.py\n"})}),"\n",(0,r.jsx)(n.p,{children:"Edit the subscriber node file with the following content:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n# publisher_subscriber_example/subscriber_node.py\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_subscriber = MinimalSubscriber()\n\n    rclpy.spin(minimal_subscriber)\n\n    # Destroy the node explicitly\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-5-understanding-the-subscriber-code",children:"Step 5: Understanding the Subscriber Code"}),"\n",(0,r.jsx)(n.p,{children:"Key components of the subscriber node:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node Initialization"}),": Creates a ROS2 node named 'minimal_subscriber'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subscription Creation"}),": ",(0,r.jsx)(n.code,{children:"self.create_subscription(String, 'topic', self.listener_callback, 10)"})," creates a subscription to the 'topic' that receives String messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Callback Function"}),": ",(0,r.jsx)(n.code,{children:"listener_callback"})," is called whenever a message is received on the topic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Message Processing"}),": The callback function logs the received message to the console"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuring-the-package",children:"Configuring the Package"}),"\n",(0,r.jsx)(n.h3,{id:"step-6-setting-up-the-entry-points",children:"Step 6: Setting Up the Entry Points"}),"\n",(0,r.jsxs)(n.p,{children:["Edit the ",(0,r.jsx)(n.code,{children:"setup.py"})," file in the package root to include entry points for our nodes:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\n\npackage_name = 'publisher_subscriber_example'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=find_packages(exclude=['test']),\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='your_name',\n    maintainer_email='your_email@example.com',\n    description='Basic publisher subscriber example',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'publisher_node = publisher_subscriber_example.publisher_node:main',\n            'subscriber_node = publisher_subscriber_example.subscriber_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"building-and-running-the-nodes",children:"Building and Running the Nodes"}),"\n",(0,r.jsx)(n.h3,{id:"step-7-building-the-package",children:"Step 7: Building the Package"}),"\n",(0,r.jsx)(n.p,{children:"Navigate to your workspace and build the package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select publisher_subscriber_example\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-8-sourcing-the-workspace",children:"Step 8: Sourcing the Workspace"}),"\n",(0,r.jsx)(n.p,{children:"Source your workspace to make the new nodes available:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-9-running-the-publisher-node",children:"Step 9: Running the Publisher Node"}),"\n",(0,r.jsx)(n.p,{children:"Open a new terminal and run the publisher node:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\nros2 run publisher_subscriber_example publisher_node\n"})}),"\n",(0,r.jsx)(n.p,{children:"You should see output like:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'[INFO] [1620000000.123456789] [minimal_publisher]: Publishing: "Hello World: 0"\n[INFO] [1620000000.623456789] [minimal_publisher]: Publishing: "Hello World: 1"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-10-running-the-subscriber-node",children:"Step 10: Running the Subscriber Node"}),"\n",(0,r.jsx)(n.p,{children:"Open another terminal and run the subscriber node:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\nros2 run publisher_subscriber_example subscriber_node\n"})}),"\n",(0,r.jsx)(n.p,{children:"You should see output like:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'[INFO] [1620000000.123456789] [minimal_subscriber]: I heard: "Hello World: 0"\n[INFO] [1620000000.623456789] [minimal_subscriber]: I heard: "Hello World: 1"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"understanding-message-flow-and-asynchronous-communication",children:"Understanding Message Flow and Asynchronous Communication"}),"\n",(0,r.jsx)(n.h3,{id:"the-asynchronous-nature-of-topics",children:"The Asynchronous Nature of Topics"}),"\n",(0,r.jsx)(n.p,{children:"The publisher-subscriber pattern is asynchronous, meaning:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publishers don't wait"}),": The publisher continues executing regardless of whether subscribers exist or are ready to receive messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subscribers receive messages"}),": Subscribers process messages as they arrive from publishers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Decoupled timing"}),": Publishers and subscribers can run at different rates without interfering with each other"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"quality-of-service-qos-considerations",children:"Quality of Service (QoS) Considerations"}),"\n",(0,r.jsxs)(n.p,{children:["The third parameter in both ",(0,r.jsx)(n.code,{children:"create_publisher"})," and ",(0,r.jsx)(n.code,{children:"create_subscription"})," (10 in our example) represents the queue size. This affects how many messages are buffered when there's a mismatch between publishing and subscribing rates."]}),"\n",(0,r.jsx)(n.h2,{id:"advanced-publisher-subscriber-concepts",children:"Advanced Publisher-Subscriber Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"multiple-subscribers",children:"Multiple Subscribers"}),"\n",(0,r.jsx)(n.p,{children:"You can run multiple subscriber nodes simultaneously, and all will receive the same messages from the publisher:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Publisher\nros2 run publisher_subscriber_example publisher_node\n\n# Terminal 2: Subscriber 1\nros2 run publisher_subscriber_example subscriber_node\n\n# Terminal 3: Subscriber 2\nros2 run publisher_subscriber_example subscriber_node\n"})}),"\n",(0,r.jsx)(n.p,{children:"All subscribers will receive the same messages from the publisher."}),"\n",(0,r.jsx)(n.h3,{id:"topic-discovery",children:"Topic Discovery"}),"\n",(0,r.jsx)(n.p,{children:"Use ROS2 command-line tools to examine the communication:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List active topics\nros2 topic list\n\n# Get information about a specific topic\nros2 topic info /topic\n\n# Echo messages from a topic (without a subscriber node)\nros2 topic echo /topic std_msgs/msg/String\n"})}),"\n",(0,r.jsx)(n.h2,{id:"physical-ai-context-and-application",children:"Physical AI Context and Application"}),"\n",(0,r.jsx)(n.p,{children:"In Physical AI systems, the publisher-subscriber pattern is fundamental to creating distributed, modular robot architectures. For example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sensor nodes"})," publish sensor data (camera images, IMU readings, joint states)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Processing nodes"})," subscribe to sensor data and perform computations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Control nodes"})," subscribe to processed information and publish motor commands"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitoring nodes"})," subscribe to various topics for logging and visualization"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This pattern supports the three-layer system:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Perception Layer"}),": Sensor nodes publish raw and processed data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cognition Layer"}),": Processing nodes interpret sensor data and make decisions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Actuation Layer"}),": Control nodes execute motor commands"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling-and-best-practices",children:"Error Handling and Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"node-lifecycle-management",children:"Node Lifecycle Management"}),"\n",(0,r.jsx)(n.p,{children:"Always properly manage the node lifecycle by destroying the node explicitly when done:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"try:\n    rclpy.spin(node)\nexcept KeyboardInterrupt:\n    pass\nfinally:\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"message-validation",children:"Message Validation"}),"\n",(0,r.jsx)(n.p,{children:"In production code, always validate messages before using them:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def listener_callback(self, msg):\n    if len(msg.data) > 0:  # Validate message content\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n    else:\n        self.get_logger().warn('Received empty message')\n"})}),"\n",(0,r.jsx)(n.h2,{id:"verification-and-testing",children:"Verification and Testing"}),"\n",(0,r.jsx)(n.h3,{id:"step-11-testing-communication-reliability",children:"Step 11: Testing Communication Reliability"}),"\n",(0,r.jsx)(n.p,{children:"To verify the communication is working properly:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Run both nodes simultaneously"}),"\n",(0,r.jsx)(n.li,{children:"Verify that messages published by the publisher are received by the subscriber"}),"\n",(0,r.jsx)(n.li,{children:"Check that the message sequence numbers increment correctly"}),"\n",(0,r.jsx)(n.li,{children:"Test that multiple subscribers can receive the same messages"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-12-using-ros2-tools-for-verification",children:"Step 12: Using ROS2 Tools for Verification"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check active nodes\nros2 node list\n\n# Check active topics\nros2 topic list\n\n# Check topic information\nros2 topic info /topic\n\n# Monitor message rate\nros2 topic hz /topic\n"})}),"\n",(0,r.jsx)(n.h2,{id:"lesson-summary",children:"Lesson Summary"}),"\n",(0,r.jsx)(n.p,{children:"In this lesson, you have learned:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publisher Implementation"}),": How to create a ROS2 node that publishes messages to a topic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subscriber Implementation"}),": How to create a ROS2 node that subscribes to messages from a topic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Message Flow"}),": How messages travel from publisher to subscriber in an asynchronous manner"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node Structure"}),": The proper structure and lifecycle management for ROS2 nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Communication Graph"}),": How publishers and subscribers form a communication network"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verification"}),": How to test and verify communication between nodes"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You now have practical experience with the fundamental communication pattern that underlies all ROS2-based robotic systems."}),"\n",(0,r.jsx)(n.h2,{id:"tools--references",children:"Tools / References"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Python 3.8+"}),"\n",(0,r.jsx)(n.li,{children:"rclpy"}),"\n",(0,r.jsx)(n.li,{children:"ROS2"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);